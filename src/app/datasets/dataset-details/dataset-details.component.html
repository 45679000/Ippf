<div class="navbar-holder">
    <app-top-header></app-top-header>
</div>
<div class="my-4">
    <app-navbar></app-navbar>
</div>
<div class="container px-md-5 mt-5 min-vh-100">
    <div class="dataset">
        <h2 class="lead-heading-mid">{{dataOfDataset.publisher}}</h2>
        <!-- <p class="lead-heading-small">Angola, 2021-2022 <span class="mx-4">{{(dataOfDataset.title.length > 0) ? dataOfDataset.title : 'No title'}}</span></p>
        <p class="lead-heading-small-black">National Bureau of Statistics</p> -->
        
        <div class="meta-data">
            <p class="date-created">Created on: <span class="h6 text-info">{{dataOfDataset.publicationDate | date:'mediumDate' }}</span></p>
            <!-- <p class="date-modified mx-4">Last Modified: <span class="h6 text-info">{{dataOfDataset.metadata_modified | date:'mediumDate' }}</span></p> -->
            <!-- <p class="number-of-times-viewed">Views: 1021</p> -->
            <!-- <p class="number-of-times-viewed mx-4">Downloads: 300</p> -->
        </div>
        <div class="spin" *ngIf="load">
            <div class="lds-roller">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <div class="dataset-content">
            <div class="btn-group mb-3">
                <button class="btn lead-heading" [ngClass]=" studyDescriptionDisp? 'pink-border' : ''" (click)="dispStudyDescription()">Survey Description</button>
                <button class="btn lead-heading" [ngClass]=" documentationDisp? 'pink-border' : ''" (click)="dispDocumentation()">Documentation & Resources</button>
            </div>
            <div class="study-description row" *ngIf="studyDescriptionDisp">
                <div class="content-data col-12 col-sm-10">
                    <h2 class="lead-heading">Identification</h2>
                    <div class="id-number mb-4">
                        <h2 class="h2">SURVEY ID NUMBER</h2>
                        <p>{{dataOfDataset.id }}</p>
                    </div>
                    <div class="survey-title">
                        <!-- <h2 class="lead-heading">TITLE</h2> -->
                        <p>Published by: {{dataOfDataset.publisher }}</p>
                    </div>
                    <!-- <p>{{meta.}}</p> -->
                    <div class="col-md-6 col-12">
                        <div class="author row col-12" >
                            <!-- <table class="table"> -->
                                <!-- <tbody> -->
                                    <div *ngFor="let file of meta.fields">
                                        <!-- <h3>{{camelToUnderscore(file.typeName)}}</h3> -->
                                        <div [innerHtml] = "!file.multiple? check(file.value) : mutlipleValues(file.value)"></div>
                                    </div>
                                    <!-- <tr>
                                        <td>Author's email:</td>
                                        <td>{{dataOfDataset.author_email}}</td>
                                    </tr>
                                    <tr>
                                        <td>Maintainer:</td>
                                        <td>{{dataOfDataset.maintainer}}</td>
                                    </tr>
                                    <tr>
                                        <td>Maintainer's email:</td>
                                        <td>{{dataOfDataset.maintainer_email}}</td>
                                    </tr> -->
                                <!-- </tbody> -->
                            <!-- </table> -->
                        </div>
                    </div>
                    
                    <!-- <div class="study-type">
                        <h2 class="lead-heading">STUDY TYPE</h2>
                        <p>{{(dataOfDataset.notes.length > 0) ? dataOfDataset.title : 'Study type not specified'}}</p>
                    </div> -->
                    <!-- <div class="col-12 series-info" id="series-info">
                        <h2 class="lead-heading">SERIES INFORMATION</h2>
                        {{(dataOfDataset.notes.length > 0) ? dataOfDataset.title : 'Series information not available'}}
                    </div> -->
                    <div class="data-description" id="data-description">
                        <!-- <div class="links col-12 col-sm-2">
                            <h2 class="lead-heading-small">Data files</h2>
                            <div class="meta-data" *ngFor="let item of resourcesArray">
                                <a href="{{item.url}}" class="blue-text"><i class="fas fa-download"></i>{{item.format}}</a>
                            </div>
                        </div> -->
                        <!-- <div class="description-data col-12 col-sm-10">
                            <p>This part basically gives a legend for the user to know what the different abbreviations used in the data mean (for eaample hh would mean data collected in a household, and hs data collected from a school, etc.)</p>
                        </div> -->
                    </div>
                </div>
            </div>
            <div class="documentation" *ngIf="documentationDisp">
                <div *ngIf="resourcesArray.length < 1">
                    No resources uploaded to this dataset
                </div>
                <div *ngIf="resourcesArray.length > 0">
                    <div *ngFor="let resource of resourcesArray">
                        <div class="questionnaires mt-4">
                            <!-- <h2 class="lead-heading">Questionnaires</h2> -->
                            <div class="questionnaire">
                                <div class="question-title">
                                    <div class="question-name">
                                        <h2 class="lead-heading">File description: {{resource.description }}</h2>
                                        <p>FIle name: {{resource.label }}</p>
                                    </div>
                                    
                                    
                                </div>
                                <div>
                                    
                                </div>
                                <div class="question-data">
                                    <!-- <p>{{resource.description}}</p> -->
                                    <!-- <p><span class="question-data-bold">Download: </span><a href="https://ippf.org/index.php/catlog/1912/download/29499">https://ippf.org/index.php/catlog/1912/download/29499</a></p> -->
                                    <div class="bottom-items row col-12">
                                        
                                        <div class="col-3 m-auto" *ngIf="resource.restricted; else visualize">
                                            <button (click)="requestData(resource.dataFile.id)" class="btn btn-primary redBtn">Request the dataset</button>
                                            </div>                
                                              
                                            <ng-template #visualize>
                                                <!-- *ngIf=" resource.dataFile.contentType == 'text/comma-separated-values' || resource.dataFile.contentType == 'text/csv'; else download" -->
                                                <div class="col-3 m-auto" >
                                                <button (click)="setDatasetId(resource.dataFile.id,resource.dataFile.contentType)" class="btn btn-primary redBtn"><span class="mx-2"><i class="fas fa-chart-line"></i></span>Visualize in Wishscope</button>
                                                </div>
                                               <!--  this.dataverse_url+"access/datafile/"+this.dataset_id -->
                                                <ng-template #download>
                                                    <div class="col-3">
                                                        <a href="{{base_url}}/access/datafile/{{resource.dataFile.id}}"><span class="mx-2"><i class="fas fa-download"></i></span>Download file</a>
                                                    </div>
                                                </ng-template>
                                            </ng-template>
                                        
                                        <div class="col-3 m-auto">
                                            Date Created: <span class="text-info">{{resource.dataFile.creationDate }}</span>
                                        </div>
                                        <div class="col-3 m-auto">
                                            <button (click)="setDatasetId(resource.dataFile.id,resource.dataFile.contentType)">Go to wishscope</button>
                                        </div>
                                        <!-- <div class="col-3 m-auto" *ngIf="resourceExistUrl(resource)">
                                            <a [routerLink]="['/wishscope']" [queryParams]="{ id: 99, resource_id: 20}" class="btn btn-link" ><span class="mx-2"><i class="fas fa-chart-line"></i></span>Visualize in Wishscope</a>
                                        </div>
                                        <div class="col-6 m-auto" *ngIf="!resourceExistUrl(resource)">
                                            No file uploaded
                                        </div>
                                        <div class="col-3 m-auto" *ngIf="resourceExistUrl(resource)"> -->
                                            <!-- <a  href="{{resource.original_url || resource.url}}" class="download-link blue-text"><span class="mx-2"><i class="fas fa-download"></i></span>Download</a>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                    </div>

                </div>
                <!-- <div class="questionnaires mt-4">
                    <h2 class="lead-heading">Questionnaires</h2>
                    <div class="questionnaire">
                        <div class="question-title">
                            <div class="question-name">
                                <p><span class="mx-2">
                                    <i class="fas fa-caret-down"></i>
                                </span>Angola Multiple Indicator Cluster Survey 2021-2022 - Questionnaire</p>
                            </div>
                            <a href="#" class="download-link blue-text"><span class="mx-2"><i class="fas fa-download"></i></span>Download</a>
                        </div>
                        <div class="question-data">
                            <p><span class="question-data-bold">Country: </span>Afghanistan</p>
                            <p><span class="question-data-bold">Language: </span>English</p>
                            <div><span class="question-data-bold">Table of Contents: </span>
                                <ul>
                                    <li>Household questionnaire modules </li>
                                    <li>Household member questionnaire modules </li>
                                    <li>Women questionnaire module</li>
                                    <li>Children Questionnaire modules</li>
                                </ul>
                            </div>
                            <p><span class="question-data-bold">Download: </span><a href="https://ippf.org/index.php/catlog/1912/download/29499">https://ippf.org/index.php/catlog/1912/download/29499</a></p>
                        </div>
                    </div>
                </div>
                <div class="reports">
                    <div class="title-heading">
                        <h2 class="lead-heading">Reports</h2>
                    </div>
                    <div class="question-title">
                        <div class="question-name">
                            <p><span class="mx-2">
                                <i class="fas fa-caret-down"></i>
                            </span>Angola Multiple Indicator Cluster Survey 2021-2022 - Questionnaire</p>
                        </div>
                        <a href="#" class="download-link blue-text"><span class="mx-2"><i class="fas fa-download"></i></span>Download</a>
                    </div>
                </div>
                <div class="technical-reports">
                    <div class="title-heading">
                        <h2 class="lead-heading">Technical Documents</h2>
                    </div>
                    <div class="question-title">
                        <div class="question-name">
                            <p><span class="mx-2">
                                <i class="fas fa-caret-down"></i>
                            </span>Angola Multiple Indicator Cluster Survey 2021-2022 - Questionnaire</p>
                        </div>
                        <a href="#" class="download-link blue-text"><span class="mx-2"><i class="fas fa-download"></i></span>Download</a>
                    </div>
                    <div class="question-title">
                        <div class="question-name">
                            <p><span class="mx-2">
                                <i class="fas fa-caret-down"></i>
                            </span>Angola Multiple Indicator Cluster Survey 2021-2022 - Questionnaire</p>
                        </div>
                        <a href="#" class="download-link blue-text"><span class="mx-2"><i class="fas fa-download"></i></span>Download</a>
                    </div>
                    <div class="question-title">
                        <div class="question-name">
                            <p><span class="mx-2">
                                <i class="fas fa-caret-down"></i>
                            </span>Angola Multiple Indicator Cluster Survey 2021-2022 - Questionnaire</p>
                        </div>
                        <a href="#" class="download-link blue-text"><span class="mx-2"><i class="fas fa-download"></i></span>Download</a>
                    </div>
                    <div class="question-title">
                        <div class="question-name">
                            <p><span class="mx-2">
                                <i class="fas fa-caret-down"></i>
                            </span>Angola Multiple Indicator Cluster Survey 2021-2022 - Questionnaire</p>
                        </div>
                        <a href="#" class="download-link blue-text"><span class="mx-2"><i class="fas fa-download"></i></span>Download</a>
                    </div>

                </div> -->
            </div>
        </div>
    </div>
    
</div>
<app-footer class="my-auto"></app-footer>