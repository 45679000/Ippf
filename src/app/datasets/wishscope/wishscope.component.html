<div class="overall-wrap d-flex flex-column min-vh-100">
  <div class="navbar-holder">
      <app-top-header></app-top-header>
  </div>
  <div>
      <div class="my-4">
          <app-navbar></app-navbar>
      </div>
      
      <div class="container-fluid py-3" [class.load] = "load">
          <h2 class="lead-heading text-center" style="display: none;">Select the dataset to visualize it's data</h2>
          <div class="col-12 top-form" style="">
              <form action="" [formGroup]="datasetForm" >
                  <div class="mb-3 col-md-6 col-12 mx-auto">
                    <label for="" class="form-label">Choose the dataset</label>
                    <div>
                      <select class="sidebarInput col-12" name="" id="" formControlName="dataset" (change)="getListOfDatafiles()">
                          <option *ngFor="let item of datasets" value="{{item.global_id}}">{{item?.metadataBlocks?.ippf?.fields[0].value?.meta_title?.value | titlecase}}</option>
                        </select>
                    </div>

                    <label for="" class="form-label">Select the data file to visualize</label>
                    <select class="sidebarInput col-12" name="" id="" formControlName="datafile" (change)="onLoadRemoteCSV($event.target.value)">
                      <option *ngFor="let item of dataFiles" value="{{item.dataFile.id}}">{{item.dataFile.filename}}</option>
                    </select>
                  </div>
              </form>
          </div>
          <div class="spin" *ngIf="load">
            <div class="lds-roller">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>      
       <!--  <button (click)="onLoadRemoteJSON()">Load remote JSON</button>
        <button (click)="onLoadRemoteCSV(17)">Load remote CSV</button> -->
      
      <div class="mb-5">
        <fm-pivot
          #pivot
          [toolbar]="true"
          [report]="report"
          [height]="600"
          (beforetoolbarcreated)="customizeToolbar($event)"
          >
        </fm-pivot>
        <iframe *ngIf="displayIframe" [src]="transform(url)" title="W3Schools Free Online Web Tutorials" class="iframe"></iframe> 
      </div>
  </div>
  <app-footer class="mt-auto"></app-footer>
</div>